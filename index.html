<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tuff Paws | Where Attitude Meets Fluff</title>
  <style>
    :root {
      --bg-color: #F3EFE4;
      --card-bg: #ffffff;
      --text: #3F322A;
      --accent: #3F322A;
      --button-bg: #3F322A;
      --button-text: #ffffff;
      --button-hover: #3E2723;
      --border: #3F322A;
      --light-text: #666666;
      --input-bg: #ffffff;
      --input-border: #3F322A;
    }

    * {
      box-sizing: border-box;
    }

    body {
      background-color: var(--bg-color);
      font-family: 'Georgia', serif;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      color: var(--text);
      text-align: center;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 450px;
      position: relative;
      height: 100vh;
      overflow: hidden;
    }

    .banner {
      width: 100%;
      max-width: 100%;
      height: auto;
      margin-bottom: 20px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .banner img {
      width: 100%;
      height: auto;
      display: block;
    }

    .section {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 20px;
      transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1), opacity 0.8s ease;
      background-color: var(--bg-color);
    }

    .section.hidden {
      transform: translateX(100%);
      opacity: 0;
      pointer-events: none;
    }

    .section.active {
      transform: translateX(0);
      opacity: 1;
    }

    .section.previous {
      transform: translateX(-100%);
      opacity: 0;
    }

    .logo {
      font-size: 42px;
      font-weight: bold;
      color: var(--accent);
      margin-bottom: 10px;
      letter-spacing: 1px;
    }

    .subtitle {
      font-size: 18px;
      color: var(--light-text);
      margin-bottom: 30px;
      line-height: 1.5;
    }

    .card {
      background-color: var(--card-bg);
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      padding: 25px;
      width: 100%;
      text-align: center;
      border: 1px solid var(--border);
      max-height: 85vh;
      overflow-y: auto;
    }

    h3 {
      color: var(--text);
      margin-top: 0;
      margin-bottom: 20px;
      font-size: 22px;
      font-weight: bold;
    }

    input {
      font-family: 'Georgia', serif;
      font-size: 16px;
      padding: 14px 16px;
      margin: 10px 0 15px 0;
      border-radius: 8px;
      border: 1px solid var(--input-border);
      width: 100%;
      text-align: center;
      outline: none;
      background-color: var(--input-bg);
      color: var(--text);
      transition: all 0.3s ease;
    }

    input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(139, 69, 19, 0.2);
    }

    input::placeholder {
      color: #888;
    }

    button {
      font-family: 'Georgia', serif;
      font-size: 16px;
      padding: 14px 30px;
      margin-top: 10px;
      border-radius: 8px;
      border: none;
      color: var(--button-text);
      background-color: var(--button-bg);
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      font-weight: bold;
    }

    button:hover {
      background-color: var(--button-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(93, 64, 55, 0.4);
    }

    .task-container {
      max-height: 50vh;
      overflow-y: auto;
      margin-bottom: 20px;
      padding-right: 5px;
    }

    .task-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border);
    }

    .task-content {
      flex: 1;
      text-align: left;
    }

    .task-text {
      color: var(--text);
      font-size: 15px;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .task-button {
      width: auto;
      padding: 8px 16px;
      margin: 0;
      font-size: 14px;
      min-width: 60px;
    }

    .task-input {
      margin-top: 10px;
      width: 100%;
    }

    .final-content {
      padding: 20px;
    }

    .checkmark {
      font-size: 48px;
      color: #4CAF50;
      margin-bottom: 20px;
    }

    .back-button {
      background-color: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
      margin-top: 20px;
    }

    .back-button:hover {
      background-color: rgba(139, 69, 19, 0.1);
    }

    .progress-bar {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }

    .progress-step {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #d7d0c0;
      margin: 0 8px;
      transition: background-color 0.3s ease;
    }

    .progress-step.active {
      background-color: var(--accent);
    }

    .step-indicator {
      color: var(--light-text);
      font-size: 14px;
      margin-bottom: 5px;
    }

    .wallet-note {
      font-size: 14px;
      color: var(--light-text);
      margin-top: 10px;
    }

    .warning {
      color: #d32f2f;
      font-size: 12px;
      margin-top: -10px;
      margin-bottom: 15px;
    }

    .task-instruction {
      font-size: 13px;
      color: var(--light-text);
      margin-top: 5px;
      text-align: left;
      line-height: 1.4;
    }

    .task-number {
      display: inline-block;
      width: 24px;
      height: 24px;
      background-color: var(--accent);
      color: #ffffff;
      border-radius: 50%;
      text-align: center;
      line-height: 24px;
      margin-right: 10px;
      font-weight: bold;
      flex-shrink: 0;
    }
    
    .loading {
      display: none;
      font-size: 16px;
      color: var(--accent);
      margin-top: 10px;
    }
    
    .spinner {
      border: 3px solid rgba(139, 69, 19, 0.3);
      border-radius: 50%;
      border-top: 3px solid var(--accent);
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .wallet-address {
      background-color: #f5f5f5;
      padding: 10px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 14px;
      margin-top: 10px;
      word-break: break-all;
    }

    .section-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      width: 100%;
    }

    /* Mobile-specific adjustments */
    @media (max-height: 700px) {
      .section {
        padding: 15px;
      }
      
      .card {
        padding: 20px;
        max-height: 80vh;
      }
      
      .task-container {
        max-height: 45vh;
      }
    }

    @media (max-width: 480px) {
      .container {
        height: 100vh;
      }
      
      .section {
        padding: 15px;
      }
      
      .card {
        padding: 20px;
      }
      
      .task-item {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .task-button {
        margin-top: 10px;
        align-self: flex-end;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Step 1: Welcome -->
    <div class="section active" id="welcome">
      <div class="banner">
        <img src="Banner.jpg">    </div>
      <div class="section-content">
        <div class="progress-bar">
          <div class="progress-step active"></div>
          <div class="progress-step"></div>
          <div class="progress-step"></div>
        </div>
        <div class="logo">Tuff Paws</div>
        <div class="subtitle">We are bringing back NFTs
And we are making it fun!</div>
        <div class="card">
          <h3>Welcome to Tuff Paws!</h3>
          <p>NFT Collection coming soon to Opensea</p>
          <button class="next-button" data-next="username">Join Cult ü¶¥</button>
        </div>
      </div>
    </div>

    <!-- Step 2: Wallet & Collection -->
    <div class="section hidden" id="username">
      <div class="section-content">
        <div class="progress-bar">
          <div class="progress-step"></div>
          <div class="progress-step active"></div>
          <div class="progress-step"></div>
        </div>
        <div class="card">
          <h3>No available slots for now
More slots will be opened soon</h3>
            <p> Stay glued on X and turn on notis for more opportunities and updates</p>
    <a href="https://x.com/tuffpaws" target="_blank" rel="noopener noreferrer"><button class="task-button">go </button></a>
        </div>
          <button class="back-button" data-prev="welcome">‚Üê Back</button>
        </div>
      </div>
    </div>

    <!-- Step 3: Tasks -->
    <div class="section hidden" id="tasks">
      <div class="section-content">
        <div class="progress-bar">
          <div class="progress-step"></div>
          <div class="progress-step"></div>
          <div class="progress-step active"></div>
        </div>
        <div class="card">
          <h3>Let's trend the cult!</h3>
          <p class="warning">Tasks will be strictly verified</p>
          
          <div class="task-container">
            <div class="task-item">
             
              <div class="task-content">
                <div class="task-text">Enter your X Username</div>
                <input type="text" id="x_username" placeholder="@username" class="task-input">
               
              </div>
            </div>
            
            <div class="task-item">
             
              <div class="task-content">
                <div class="task-text">Like the pinned post</div>
              
                <a href="https://x.com/tuffpaws" target="_blank" rel="noopener noreferrer">
                  <button class="task-button">Go</button>
                </a>
              </div>
            </div>
            
            <div class="task-item">
             
              <div class="task-content">
                <div class="task-text">Quote pinned post with a bullish caption adding "Tuff Paws"</div>
               
                <a href="https://x.com/tuffpaws" target="_blank" rel="noopener noreferrer">
                  <button class="task-button">Go</button>
                </a>
                <input type="url" id="quote_link" placeholder="Paste your quote link" class="task-input">
              </div>
            </div>
            
            <div class="task-item">
           
              <div class="task-content">
                <div class="task-text">Drop a pawsitive comment or tag a fren</div>
            
                <a href="https://x.com/tuffpaws" target="_blank" rel="noopener noreferrer">
                  <button class="task-button">Go</button>
                </a>
                <input type="url" id="comment_link" placeholder="Paste your comment/tag link" class="task-input">
              </div>
            </div>
          </div>

          <button class="next-button" id="submit-tasks">Submit & Join Cult</button>
          <div class="loading" id="loading">
            <div class="spinner"></div>
            Saving your entry...
          </div>
          <button class="back-button" data-prev="username">‚Üê Back</button>
        </div>
      </div>
    </div>

    <!-- Step 4: Final -->
    <div class="section hidden" id="final">
      <div class="section-content">
        <div class="card">
          <div class="final-content">
            <div class="checkmark">‚úÖ</div>
            <h3>Welcome to the Cult!</h3>
            <p>Your entry has been recorded successfully.</p>
            <p>
              <h4>How to Position more?</h4>
              <ul>
                <li>Tag Tuff Paws to posts about your love for your favorite NFT collections</li>

<li>Spread the gospel to fellow collectors</li></ul>

<p>We are bringing back NFTs
And we are making it fun!</p></p>
            <p class="wallet-note">Your registered wallet:</p>
            <div class="wallet-address" id="registered-wallet"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase + Realtime Database -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAKaGIWukjiDtcs87YOYVXJqFj_qAvch94",
      authDomain: "wot-9d265.firebaseapp.com",
      databaseURL: "https://wot-9d265-default-rtdb.firebaseio.com/",
      projectId: "wot-9d265",
      storageBucket: "wot-9d265.appspot.com",
      messagingSenderId: "77886767479",
      appId: "1:77886767479:web:dba9f840c01d2f50c36172"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Navigation logic
    const sections = document.querySelectorAll('.section');
    let currentSection = 'welcome';
    
    // Update progress bar
    function updateProgressBar() {
      const steps = document.querySelectorAll('.progress-step');
      const sectionIds = ['welcome', 'username', 'tasks', 'final'];
      const currentIndex = sectionIds.indexOf(currentSection);
      
      steps.forEach((step, index) => {
        if (index <= currentIndex) {
          step.classList.add('active');
        } else {
          step.classList.remove('active');
        }
      });
    }
    
    // Navigate to section
    function navigateToSection(sectionId) {
      // Hide all sections
      sections.forEach(section => {
        section.classList.remove('active');
        section.classList.add('hidden');
        
        if (section.id === currentSection) {
          section.classList.add('previous');
        } else {
          section.classList.remove('previous');
        }
      });
      
      // Show target section
      const targetSection = document.getElementById(sectionId);
      targetSection.classList.remove('hidden');
      targetSection.classList.add('active');
      targetSection.classList.remove('previous');
      
      currentSection = sectionId;
      updateProgressBar();
    }
    
    // Set up navigation buttons
    document.querySelectorAll('.next-button').forEach(button => {
      if (button.id !== 'submit-tasks') {
        button.addEventListener('click', function() {
          const nextSection = this.getAttribute('data-next');
          
          // Validate inputs before proceeding
          if (nextSection === 'tasks') {
            const evmAddress = document.getElementById('evm_address').value.trim();
            const favoriteCollection = document.getElementById('favorite_collection').value.trim();
            const evmRegex = /^0x[a-fA-F0-9]{40}$/;
            
            if (!evmAddress) {
              alert("Please enter your EVM wallet address before continuing.");
              return;
            }
            
            if (!evmRegex.test(evmAddress)) {
              alert("Please enter a valid EVM address (starts with 0x + 40 hex characters).");
              return;
            }
            
            if (!favoriteCollection) {
              alert("Please enter your favorite NFT collection before continuing.");
              return;
            }
          }
          
          navigateToSection(nextSection);
        });
      }
    });
    
    // Set up back buttons
    document.querySelectorAll('.back-button').forEach(button => {
      button.addEventListener('click', function() {
        const prevSection = this.getAttribute('data-prev');
        navigateToSection(prevSection);
      });
    });
    
    // Submit tasks and save to Firebase
    document.getElementById('submit-tasks').addEventListener('click', async function() {
      const evmAddress = document.getElementById('evm_address').value.trim();
      const favoriteCollection = document.getElementById('favorite_collection').value.trim();
      const xUsername = document.getElementById('x_username').value.trim();
      const quoteLink = document.getElementById('quote_link').value.trim();
      const commentLink = document.getElementById('comment_link').value.trim();
      
      // Validate all inputs
      if (!xUsername) {
        alert("Please enter your X username before submitting.");
        return;
      }
      
      if (!quoteLink || !commentLink) {
        alert("Please paste both your quote and comment/tag links before submitting.");
        return;
      }
      
      // Show loading state
      const submitButton = document.getElementById('submit-tasks');
      const loadingElement = document.getElementById('loading');
      submitButton.style.display = 'none';
      loadingElement.style.display = 'block';
      
      try {
        // Save to Firebase
        const entryRef = push(ref(db, "tuffpaws-entries"));
        await set(entryRef, { 
          evmAddress, 
          favoriteCollection,
          xUsername, 
          quoteLink, 
          commentLink, 
          timestamp: new Date().toISOString()
        });
        
        // Show registered wallet in final screen
        document.getElementById('registered-wallet').textContent = evmAddress;
        
        // Navigate to final screen
        setTimeout(() => {
          navigateToSection('final');
        }, 1000);
        
      } catch (e) {
        alert("Error saving your entry: " + e);
        // Reset button state
        submitButton.style.display = 'block';
        loadingElement.style.display = 'none';
      }
    });
  </script>
</body>
</html>
